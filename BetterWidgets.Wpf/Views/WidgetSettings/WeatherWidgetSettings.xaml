<c:WidgetSettingsView
    x:Class="BetterWidgets.Views.WidgetSettings.WeatherWidgetSettings"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:c="clr-namespace:BetterWidgets.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:h="clr-namespace:BetterWidgets.Helpers"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:r="clr-namespace:BetterWidgets.Resources"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:vm="clr-namespace:BetterWidgets.ViewModel.WidgetsSettingsViews"
    x:Name="Root"
    Title="{x:Static r:Resources.WeatherWidgetSettingsTitle}"
    d:Background="{DynamicResource ApplicationBackgroundBrush}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    d:Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    BackCommand="{Binding GoBackCommand}"
    LoadedCommand="{Binding LoadedCommand}"
    Messages="{Binding ErrorMessages, Mode=OneWay}"
    mc:Ignorable="d">
    <c:WidgetSettingsView.DataContext>
        <vm:WeatherWidgetSettingsViewModel />
    </c:WidgetSettingsView.DataContext>

    <c:WidgetSettingsView.Settings>
        <c:CardSettingView
            Title="{x:Static r:Resources.LiveBackgroundSettingTitle}"
            Id="widget.weather.enableLiveBackground"
            Subtitle="{x:Static r:Resources.LiveBackgroundSettingSubtitle}">
            <c:CardSettingView.Icon>
                <ui:SymbolIcon Symbol="PictureInPicture20" />
            </c:CardSettingView.Icon>

            <c:CardSettingView.Header>
                <ui:ToggleSwitch IsChecked="{Binding IsLiveBackground, Mode=TwoWay}" />
            </c:CardSettingView.Header>
        </c:CardSettingView>
        <c:CardSettingView
            Title="{x:Static r:Resources.WeatherTempUnits}"
            Id="widget.weather.temperatureMode"
            Subtitle="{x:Static r:Resources.WeatherTempUnitsSubtitle}">
            <c:CardSettingView.Icon>
                <ui:SymbolIcon Symbol="Temperature20" />
            </c:CardSettingView.Icon>

            <c:CardSettingView.Header>
                <ComboBox Width="150" SelectedIndex="{Binding WeatherUnits, Mode=TwoWay}">
                    <ComboBox.Items>
                        <ComboBoxItem Content="{x:Static r:Resources.CelsiusUnits}" />
                        <ComboBoxItem Content="{x:Static r:Resources.FahrenheitUnits}" />
                    </ComboBox.Items>
                </ComboBox>
            </c:CardSettingView.Header>
        </c:CardSettingView>
        <c:ExpanderSettingView
            Title="{x:Static r:Resources.WeatherLocationSetting}"
            Id="widget.weather.location"
            Subtitle="{x:Static r:Resources.WeatherLocationSettingSubtitle}">
            <c:ExpanderSettingView.Icon>
                <ui:SymbolIcon Symbol="Location20" />
            </c:ExpanderSettingView.Icon>

            <c:ExpanderSettingView.Header>
                <ComboBox Width="150" SelectedIndex="{Binding LocationMode, Mode=TwoWay}">
                    <ComboBox.Items>
                        <ComboBoxItem Content="{x:Static r:Resources.DetectLocation}" />
                        <ComboBoxItem Content="{x:Static r:Resources.DefaultLocation}" />
                    </ComboBox.Items>
                </ComboBox>
            </c:ExpanderSettingView.Header>
            <c:ExpanderSettingView.Content>
                <StackPanel
                    Margin="5,0"
                    HorizontalAlignment="Stretch"
                    h:MarginSetter.LastItemMargin="0, 1, 0, 0"
                    h:MarginSetter.Margin="0, 0, 0, 10">
                    <Grid HorizontalAlignment="Stretch">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <ui:TextBlock
                            Grid.Column="0"
                            VerticalAlignment="Center"
                            Text="{x:Static r:Resources.WeatherLocationSetting}"
                            TextTrimming="CharacterEllipsis" />
                        <ui:TextBox
                            Grid.Column="1"
                            Width="220"
                            Margin="0,0,-10,0"
                            IconPlacement="Right"
                            IsEnabled="{Binding CanEnterLocation, Mode=OneWay}"
                            PlaceholderText="{x:Static r:Resources.LocationBoxPlaceholder}"
                            Text="{Binding WeatherLocation, Mode=TwoWay}">
                            <ui:TextBox.Icon>
                                <ui:SymbolIcon Symbol="Search20" />
                            </ui:TextBox.Icon>
                        </ui:TextBox>
                    </Grid>

                    <Rectangle HorizontalAlignment="Stretch" Style="{StaticResource HorizontalExpanderDividerStyle}" />

                    <Grid HorizontalAlignment="Stretch">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <ui:TextBlock
                            Grid.Column="0"
                            VerticalAlignment="Center"
                            Text="{x:Static r:Resources.DefaultWeatherLocation}"
                            TextTrimming="CharacterEllipsis" />
                        <ui:Button
                            Grid.Column="1"
                            Appearance="Primary"
                            Command="{Binding GetCurrentGeolocationCommand}"
                            Content="{x:Static r:Resources.DetectLocation}" />
                    </Grid>
                </StackPanel>
            </c:ExpanderSettingView.Content>
        </c:ExpanderSettingView>
        <c:CardSettingView
            Title="{x:Static r:Resources.UpdateInterval}"
            Id="widget.weather.updateInterval"
            Subtitle="{x:Static r:Resources.UpdateIntervalSubtitle}">
            <c:CardSettingView.Icon>
                <ui:SymbolIcon Symbol="Clock20" />
            </c:CardSettingView.Icon>

            <c:CardSettingView.Header>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <ui:TextBlock
                        Grid.Column="0"
                        Margin="13,0"
                        VerticalAlignment="Center"
                        Text="{x:Static r:Resources.Minutes}" />
                    <ui:NumberBox
                        Grid.Column="1"
                        LargeChange="1"
                        Maximum="550"
                        Minimum="30"
                        SmallChange="1"
                        Value="{Binding UpdateInterval, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                </Grid>
            </c:CardSettingView.Header>
        </c:CardSettingView>
    </c:WidgetSettingsView.Settings>

</c:WidgetSettingsView>
