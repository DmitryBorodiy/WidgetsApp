<c:SettingCategory
    x:Class="BetterWidgets.Views.Settings.GeneralCategory"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:c="clr-namespace:BetterWidgets.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:r="clr-namespace:BetterWidgets.Resources"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:vm="clr-namespace:BetterWidgets.ViewModel.SettingsViews"
    x:Name="Root"
    Title="{x:Static r:Resources.GeneralSettings}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    BackCommand="{Binding BackCommand}"
    LoadedCommand="{Binding LoadedCommand}"
    LoadedCommandParameter="{Binding ElementName=Root}"
    Subtitle="{x:Static r:Resources.GeneralSettingsSubtitle}"
    mc:Ignorable="d">
    <c:SettingCategory.DataContext>
        <vm:GeneralSettingsViewModel />
    </c:SettingCategory.DataContext>
    <c:SettingCategory.Icon>
        <ui:SymbolIcon Symbol="Settings20" />
    </c:SettingCategory.Icon>

    <c:SettingCategory.Settings>
        <c:CardSettingView
            x:Name="AutorunSettingCard"
            Title="{x:Static r:Resources.AutorunSettingTitle}"
            Id="app.autorun"
            Subtitle="{x:Static r:Resources.AutorunSettingSubitle}">
            <c:CardSettingView.Icon>
                <ui:SymbolIcon Symbol="Rocket20" />
            </c:CardSettingView.Icon>

            <c:CardSettingView.Header>
                <ui:ToggleSwitch IsChecked="{Binding IsAutorunEnabled, Mode=TwoWay}" />
            </c:CardSettingView.Header>
        </c:CardSettingView>
        <c:CardSettingView
            Title="{x:Static r:Resources.EnableTrayIcon}"
            Id="shell.trayIconEnabled"
            Subtitle="{x:Static r:Resources.EnableTrayIconSubtitle}">
            <c:CardSettingView.Icon>
                <ui:SymbolIcon Symbol="Icons20" />
            </c:CardSettingView.Icon>
            <c:CardSettingView.Header>
                <ui:ToggleSwitch IsChecked="{Binding IsTrayIconEnabled, Mode=TwoWay}" />
            </c:CardSettingView.Header>
        </c:CardSettingView>
        <c:CardSettingView
            Title="{x:Static r:Resources.OpenShellOnStart}"
            Id="shell.launchWhenStart"
            Subtitle="{x:Static r:Resources.OpenShellOnStartSubtitle}">
            <c:CardSettingView.Icon>
                <ui:SymbolIcon Symbol="AppGeneric20" />
            </c:CardSettingView.Icon>
            <c:CardSettingView.Header>
                <ui:ToggleSwitch IsChecked="{Binding ShowMainWindowOnStartup, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
            </c:CardSettingView.Header>
        </c:CardSettingView>
        <c:CardSettingView
            x:Name="LanguageSettingCard"
            Title="{x:Static r:Resources.LanguageSetting}"
            Id="app.language"
            Subtitle="{x:Static r:Resources.LanguageSettingSubtitle}">
            <c:CardSettingView.Icon>
                <ui:SymbolIcon Symbol="BookOpenGlobe20" />
            </c:CardSettingView.Icon>

            <c:CardSettingView.Header>
                <ComboBox
                    Width="200"
                    VerticalAlignment="Center"
                    ItemTemplate="{StaticResource CultureInfoItemTemplate}"
                    ItemsSource="{Binding Languages, Mode=OneWay}"
                    SelectedIndex="{Binding SelectedLanguageIndex, Mode=TwoWay}" />
            </c:CardSettingView.Header>

            <c:CardSettingView.Content>
                <Grid Margin="8,0,8,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <ui:InfoBar
                        Grid.Column="0"
                        Grid.ColumnSpan="2"
                        IsClosable="False"
                        IsOpen="True"
                        Message="{x:Static r:Resources.RequiresRestartSubtitle}"
                        Severity="Warning" />
                    <Button
                        Grid.Column="1"
                        Margin="0,0,8,0"
                        VerticalAlignment="Center"
                        Command="{Binding RestartCommand}"
                        Content="{x:Static r:Resources.Restart}" />
                </Grid>
            </c:CardSettingView.Content>
        </c:CardSettingView>
    </c:SettingCategory.Settings>
</c:SettingCategory>
