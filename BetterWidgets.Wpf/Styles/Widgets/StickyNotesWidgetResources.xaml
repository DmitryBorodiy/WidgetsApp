<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:convert="clr-namespace:BetterWidgets.Behaviours.Converters"
    xmlns:d="clr-namespace:BetterWidgets.Helpers.XamlDocs"
    xmlns:h="clr-namespace:BetterWidgets.Helpers"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:vmc="clr-namespace:BetterWidgets.ViewModel.Components">

    <Color x:Key="StickyNoteForegroundColor">#1A1A1A</Color>

    <SolidColorBrush x:Key="StickyNoteForegroundBrush" Color="{StaticResource StickyNoteForegroundColor}" />

    <convert:BoolToVisibility x:Key="NoteVisibilityConverter" />

    <DataTemplate x:Key="StickyNoteItemTemplate" DataType="vmc:NoteViewModel">
        <ui:Card
            MaxHeight="130"
            Margin="-5"
            Padding="0"
            VerticalAlignment="Top"
            ClipToBounds="True"
            IsHitTestVisible="False">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition />
                </Grid.RowDefinitions>

                <Border
                    x:Name="UIColorLine"
                    Grid.Row="0"
                    Height="4"
                    Background="{Binding ColorBrush, Mode=OneWay}"
                    CornerRadius="3, 3, 0, 0"
                    Opacity="0.8" />

                <Grid Grid.Row="1" Margin="8,6,8,3">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <ui:TextBlock
                        Grid.Row="0"
                        Grid.Column="0"
                        Margin="3,0,6,0"
                        FontFamily="{Binding DefaultFontFamily, Mode=OneWay}"
                        FontSize="14"
                        Text="{Binding Title, Mode=OneWay}"
                        TextTrimming="CharacterEllipsis" />

                    <StackPanel
                        Grid.Row="0"
                        Grid.Column="1"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Center"
                        Orientation="Horizontal">
                        <ui:SymbolIcon
                            Margin="0,-3,2,0"
                            VerticalAlignment="Center"
                            FontSize="13"
                            Opacity="0.8"
                            Symbol="Pin20"
                            Visibility="{Binding IsPinned, Mode=OneWay, Converter={StaticResource BoolToVisibility}}" />
                        <ui:TextBlock
                            Margin="5,0,0,0"
                            VerticalAlignment="Center"
                            FontSize="11"
                            Opacity="0.8"
                            Text="{Binding DateLabel, Mode=OneWay}"
                            TextTrimming="CharacterEllipsis" />
                    </StackPanel>

                    <ui:RichTextBox
                        Grid.Row="1"
                        Grid.Column="0"
                        Grid.ColumnSpan="3"
                        Margin="-20,-3,-20,0"
                        d:RichTextBoxHelper.BindableDocument="{Binding Document, Mode=OneWay}"
                        Background="Transparent"
                        BorderBrush="Transparent"
                        FontSize="12"
                        IsReadOnly="True"
                        Opacity="0.8"
                        RenderTransformOrigin="0.5,0.5"
                        ScrollViewer.CanContentScroll="False"
                        ScrollViewer.VerticalScrollBarVisibility="Hidden">
                        <ui:RichTextBox.RenderTransform>
                            <ScaleTransform ScaleX="0.9" ScaleY="0.9" />
                        </ui:RichTextBox.RenderTransform>
                    </ui:RichTextBox>
                </Grid>
            </Grid>
        </ui:Card>
    </DataTemplate>

    <ItemsPanelTemplate x:Key="StickyNotesItemsPanel">
        <StackPanel h:MarginSetter.Margin="0,0,0,6" />
    </ItemsPanelTemplate>

</ResourceDictionary>